<Project  xmlns='http://schemas.microsoft.com/developer/msbuild/2003' >

	<!--Unmodified Target to override-->
	<!--<Target Name="_PowerAppsPlugin_PublishAfterBuild"
	  AfterTargets="Build"
	  Condition="'$(PublishOnBuild)' == 'true'"
	  DependsOnTargets="Publish">
	</Target>-->

	<Target Name="_PowerAppsPlugin_PublishAfterBuild"
		  AfterTargets="Build"
		  Condition="'$(PublishOnBuild)' == 'true'"
		  DependsOnTargets="Publish">
	</Target>


	<!-- Overriding this target to not return anything.  Known issue.  -->
	<Target Name="GetProjectOutputPath" Returns="@(ProjectOutputPath)" DependsOnTargets="GetPluginPackageInfo">
		<ItemGroup>
			<ProjectOutputPath Include="pluginfile">
				<PowerAppsComponentType>$(PowerAppsComponentType)</PowerAppsComponentType>
			</ProjectOutputPath>
		</ItemGroup>
	</Target>


	<!--<Target Name="_PowerAppsPlugin_PublishAfterBuild" />-->

	<!--<Target Name="Publish"
			DependsOnTargets="Build;$(_CorePublishTargets)" />-->

	<!--<Target Name="_PowerAppsPlugin_PublishAfterBuild" />-->

	<!--Unmodifed Publish targets to override -->

	<!--<Target Name="_PublishBuildAlternative"
			Condition="'$(NoBuild)' != 'true'"
			DependsOnTargets="Build;$(_CorePublishTargets)" />-->

	<!--<Target Name="_PublishNoBuildAlternative"
			Condition="'$(NoBuild)' == 'true'"
			DependsOnTargets="$(_PublishNoBuildAlternativeDependsOn)" />

	<Target Name="Publish"
			Condition="$(IsPublishable) == 'true'"
			DependsOnTargets="_PublishBuildAlternative;_PublishNoBuildAlternative" />-->

	<!--Fix to override buggy Microsoft.PowerApps.MSBuild.Plugin target-->
	<!--<Target Name="_PowerAppsPlugin_PublishAfterBuild"
	  AfterTargets="Build">

		<Message Text="Calling Publish in _PowerAppsPlugin_PublishAfterBuild override target"
				  Importance="high" />
		
		<CallTarget Targets="Publish" />
		
	</Target>-->

	<!--<PropertyGroup>
			<OpenstrataIsPublishBuild>false</OpenstrataIsPublishBuild>
			<PublishDependsOn>OpenStrataDetectedPublish;$(PublishDependsOn)</PublishDependsOn>
		</PropertyGroup>

		<Target Name="OpenStrataDetectedPublish" BeforeTargets="Publish" >
			<Message Text="Openstrata Detected Publish"
						  Importance="high" />
			<PropertyGroup>
				<OpenstrataIsPublishBuild>true</OpenstrataIsPublishBuild>
			</PropertyGroup>
		</Target>


		<Target Name="_OstrataPublishBuildAlternative"
				Condition="'$(NoBuild)' != 'true'"
				DependsOnTargets="Build;$(_CorePublishTargets)" />

		<Target Name="_OstrataPublishNoBuildAlternative"
				Condition="'$(NoBuild)' == 'true'"
				DependsOnTargets="$(_PublishNoBuildAlternativeDependsOn)" />


		<Target Name="_PowerAppsPlugin_PublishAfterBuild"
		   AfterTargets="Build"
			DependsOnTargets="_OstrataPublishBuildAlternative;_OstrataPublishNoBuildAlternative" >

			<Message Text="Calling Publish in _PowerAppsPlugin_PublishAfterBuild override target"
						  Importance="high" />

			<CallTarget Targets="Publish"  Condition="'$(OpenstrataIsPublishBuild)'!='true'"  />


		</Target>-->

</Project>
