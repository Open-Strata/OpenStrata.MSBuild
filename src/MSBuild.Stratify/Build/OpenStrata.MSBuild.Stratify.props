<!--
***********************************************************************************************
OpenStrata.MSBuild.Package.props

WARNING:  DO NOT MODIFY this file unless you are knowledgeable about MSBuild and have
          created a backup copy.  Incorrect changes to this file will make it
          impossible to load or build your projects from the command-line or the IDE.

Copyright (c) 74Bravo LLC and Contributors. All rights reserved.. All rights reserved.
***********************************************************************************************
-->
<Project  xmlns='http://schemas.microsoft.com/developer/msbuild/2003' >


	<PropertyGroup Label='OpenStrata Project Properties'>
		<OpenStrataProjectType Condition="'$(OpenStrataProjectType)' == ''">strati</OpenStrataProjectType>
		<RestatifyDuplicateProjectTypes Condition="'$(RestatifyDuplicateProjectTypes)' != '' AND '$(OpenStrataProjectType)' != 'strati' ">true</RestatifyDuplicateProjectTypes>
		<PackageNameSuffix>Strati</PackageNameSuffix>
		<IsPackable>true</IsPackable>

		<ostrataNugetPackageFolder>$([System.IO.Path]::GetFullPath('$(MSBuildThisFileDirectory)..'))</ostrataNugetPackageFolder>
		<ostrataStratifyVersion>$([System.IO.Path]::GetFileName($(ostrataNugetPackageFolder)))</ostrataStratifyVersion>

	</PropertyGroup>

	<ItemGroup>
		<None Include="strati.props" Pack="true" PackagePath="\build;\buildTransitive" Condition="Exists('strati.props')" />
		<None Include="strati.targets" Pack="true" PackagePath="\build;\buildTransitive" Condition="Exists('strati.targets')" />
		<None Include="strati.*.targets" Pack="true" PackagePath="\build;\buildTransitive" />
	</ItemGroup>

	<PropertyGroup>
		<GeneratePackageOnBuild>true</GeneratePackageOnBuild>
		<DelayCreationOfNugetPackage>true</DelayCreationOfNugetPackage>
		<SuppressDependenciesWhenPacking>true</SuppressDependenciesWhenPacking>

		<GenerateNuspecDependsOn>
			CreateStrati;
			$(GenerateNuspecDependsOn)
		</GenerateNuspecDependsOn>

		<CreateStratiDependsOn>
			GenerateBuildTransitiveProps;
			GenerateStratiManifest;
			GetStratiFiles;
			$(CreateStratiDependsOn)
		</CreateStratiDependsOn>

		<DelayedPackageCreationDependsOn>
			AddTransitiveStratiPackageReferencesToNuspec;
			$(DelayedPackageCreationDependsOn)
		</DelayedPackageCreationDependsOn>

		<!--In order for the transitive behavior to work, the development dependency cannot be true.-->
		<DevelopmentDependency></DevelopmentDependency>
		<IncludeBuildOutput>false</IncludeBuildOutput>
		<IsTool>true</IsTool>

	</PropertyGroup>

	<ItemGroup>
		<OpenStrataProject Include="$(MSBuildProjectFullPath)">
			<OpenStrataProjectType>strati</OpenStrataProjectType>
			<ProjectName>$(MSBuildProjectName)</ProjectName>
		</OpenStrataProject>
	</ItemGroup>

</Project>
